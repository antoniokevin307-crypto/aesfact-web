<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin - AESFACT</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.38.1"></script>
</head>
<body class="admin">
  <div class="container">
    <h1>Panel de Administración</h1>
    <div id="login-panel" class="card login-panel">
      <h2>Acceso Administrador</h2>
      <p class="muted">Introduce tus credenciales</p>
      <input type="email" id="admin-email" placeholder="Correo (ej: root@gmail.com)">
      <input type="password" id="admin-pass" placeholder="Contraseña">
      <div style="margin-top:12px"><button id="login-btn" class="btn">Entrar</button></div>
      <p class="muted" style="margin-top:12px;font-size:0.95rem">Credenciales por defecto: <strong>root@gmail.com</strong> / <strong>admin123</strong></p>
    </div>

    <div id="admin-panel" class="hidden">
      <h2>Contenido</h2>
      <div class="admin-layout">
        <nav class="admin-nav">
          <a href="#sec-about">Nosotros</a>
          <a href="#sec-services">Servicios</a>
          <a href="#sec-projects">Proyectos</a>
          <a href="#sec-events">Eventos</a>
          <a href="#sec-news">Noticias</a>
          <a href="#sec-members">Integrantes</a>
          <!-- Galería eliminada del admin (se alimenta desde otros apartados) -->
          <a href="#sec-aesfact">AESFACT</a>
        </nav>
        <div class="admin-content">
          <section id="sec-about" class="admin-section card">
            <h3>Nosotros (Misión / Visión / Valores / Política / Objetivos)</h3>
            <textarea id="edit-mision" placeholder="Misión"></textarea>
            <textarea id="edit-vision" placeholder="Visión"></textarea>
            <textarea id="edit-valores" placeholder="Valores (uno por línea)"></textarea>
            <textarea id="edit-politica" placeholder="Política de Calidad"></textarea>
            <textarea id="edit-objetivos" placeholder="Objetivos (uno por línea)"></textarea>
            <textarea id="edit-objetivos-calidad" placeholder="Objetivos de Calidad (uno por línea)"></textarea>
            <button id="save-about" class="btn">Guardar</button>
          </section>

          <section id="sec-services" class="admin-section card">
            <h3>Servicios</h3>
            <input id="service-title" placeholder="Título">
            <textarea id="service-desc" placeholder="Descripción"></textarea>
            <div class="admin-actions"><button id="add-service" class="btn">Agregar servicio</button><button id="cancel-service" class="btn muted hidden">Cancelar</button></div>
            <div id="service-admin-list"></div>
          </section>

          <section id="sec-projects" class="admin-section card">
            <h3>Proyectos</h3>
            <input id="proj-title" placeholder="Título">
            <textarea id="proj-desc" placeholder="Descripción"></textarea>
            <input id="proj-date" type="date">
            <select id="proj-status">
              <option>En curso</option>
              <option>Terminado</option>
              <option>Cancelado</option>
            </select>
            <div class="admin-actions"><button id="add-proj" class="btn">Agregar proyecto</button><button id="cancel-proj" class="btn muted hidden">Cancelar</button></div>
            <div id="proj-admin-list"></div>
          </section>

          <section id="sec-events" class="admin-section card">
            <h3>Eventos</h3>
            <input id="evt-title" placeholder="Título">
            <input id="evt-date" type="date">
            <textarea id="evt-desc" placeholder="Descripción"></textarea>
            <div class="admin-actions"><button id="add-event" class="btn">Agregar evento</button><button id="cancel-event" class="btn muted hidden">Cancelar</button></div>
            <div id="event-admin-list"></div>
          </section>

          <section id="sec-news" class="admin-section card">
            <h3>Noticias (imagen URL o subir archivo)</h3>
            <input id="news-title" placeholder="Título">
            <textarea id="news-body" placeholder="Contenido"></textarea>
            <input id="news-date" type="date">
            <input id="news-image-url" placeholder="URL imagen (opcional)">
            <input id="news-image-file" type="file" accept="image/*">
            <div class="admin-actions"><button id="add-news" class="btn">Agregar noticia</button><button id="cancel-news" class="btn muted hidden">Cancelar</button></div>
            <div id="news-preview" class="media-preview"></div>
            <div id="news-admin-list"></div>
          </section>

          <section id="sec-members" class="admin-section card">
            <h3>Integrantes (foto URL o subir archivo)</h3>
            <input id="mem-name" placeholder="Nombre completo">
            <input id="mem-role" placeholder="Cargo">
            <input id="mem-email" placeholder="Email">
            <input id="mem-phone" placeholder="Teléfono">
            <input id="mem-photo-url" placeholder="URL Foto (opcional)">
            <input id="mem-photo-file" type="file" accept="image/*">
            <div class="admin-actions"><button id="add-member" class="btn">Agregar integrante</button><button id="cancel-member" class="btn muted hidden">Cancelar</button></div>
            <div id="member-preview" class="media-preview"></div>
            <div id="member-admin-list"></div>
          </section>

          <!-- Galería administrada automáticamente desde Noticias/AESFACT/Proyectos (no editable manualmente) -->

          <section id="sec-aesfact" class="admin-section card">
            <h3>AESFACT (Index)</h3>
            <label>Imagen (URL o subir)</label>
            <input id="aesfact-image-url" placeholder="URL imagen">
            <input id="aesfact-image-file" type="file" accept="image/*">
            <label>Año</label>
            <input id="aesfact-year" placeholder="2026">
            <div class="admin-actions"><button id="save-aesfact" class="btn">Guardar AESFACT</button></div>
            <div id="aesfact-preview" class="media-preview"></div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit modal (reusable) -->
  <div id="edit-modal" class="modal hidden">
    <div class="modal-content card">
      <button id="modal-close" class="modal-close btn muted">✖</button>
      <div id="modal-body"></div>
      <div class="modal-actions">
        <button id="modal-save" class="btn">Guardar</button>
        <button id="modal-cancel" class="btn muted">Cancelar</button>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>
</html>
